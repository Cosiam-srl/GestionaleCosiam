<!-- Filter Datatables -->
<section id="ngx-datatable-filter">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title">Fornitori</h4>
        </div>
        <div class="card-content">
          <div class="card-body">

            <div class="row">
              <!-- Campo di ricerca -->
              <div class="col-3">
                <fieldset class="form-group">
                  <label for="ngx-filter-ref">Cerca:</label>
                  <input id="ngx-filter-ref" class="form-control form-control-sm" type="text"
                    placeholder="Filtra la colonna Nome e Tipo" (keyup)="filterUpdate($event)" />
                </fieldset>
              </div>

              <!-- Tasto "Aggiungi fornitori al cantiere" -->
              <div class="col-auto mt-3">
                <button class="btn btn-primary mb-2" (click)="openLg(content)">Aggiungi fornitori al cantiere</button>
              </div>

              <!-- Tasto "Elimina fornitori dal cantiere" -->
              <div class="col-auto mt-3">
                <button type="button" class="btn bg-light-warning confirm-text mb-2" (click)="ConfirmText()">Elimina
                  fornitori dal cantiere</button>
              </div>
            </div>

            <!-- RICORDA CHE IL TESTO INSERITO NELLE LABEL Ãˆ LEGATO AI PLACEHOLDER(guarda funzione addDatiNota)!!! -->
            <!-- codice del popup che viene aperto quando si clicc su creaNota -->
            <ng-template #content let-modal>
              <div class="modal-header">
                <h4 class="modal-title">Aggiungi Fornitori</h4>
                <button type="button" class="btn btn-danger" aria-label="Close" (click)="modal.dismiss('Cross click')">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="row pb-5">
                  <div class="col-md-12 mb-5">
                    <label for="exampleFormControlInput1" class="form-label">Nuovi fornitori</label>
                    <div class="form-group">
                      <!-- bindlabel=elenco che compare(in questo caso i nomi) -->
                      <!-- multiple abilita la scelta multipla -->
                      <ng-select [items]="fornitoriget" bindLabel="name" bindValue="id" [multiple]="true"
                        [closeOnSelect]="false" placeholder="Seleziona destinatari" [(ngModel)]="nuovifornitori">
                      </ng-select>
                      <!-- <p class="text-italic font-small-2 mt-1">
                        Selected cities: {{selectedCityIds}}
                      </p> -->
                    </div>
                  </div>
                </div>
                <!-- parte in basso -->
              </div>
              <div class="modal-footer mt-2">

                <!-- bottone crea nota -->
                <button type="button" class="btn bg-light-success mr-1 type-success mb-1 mb-sm-0"
                  (click)="aggiungiFornitori()" (click)="TypeSuccess()"
                  (click)="modal.close('Close click')">Conferma</button>

                <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
              </div>
            </ng-template>

            <!-- fine popup -->


            <!-- [sorts]="[{prop: 'nota.id', dir: 'asc'}]" -->

            <!-- il campo limit serve per imopstare quante righe della tabella compaiono per ogni pagina -->
            <ngx-datatable class="bootstrap core-bootstrap" [columnMode]="columnMode.force" [headerHeight]="60"
              [footerHeight]="50" rowHeight="50" [limit]="4" [rows]="fornitoriCantiere" [scrollbarH]="true"
              [sorts]="[{prop: 'id', dir: 'desc'}]" (select)="onSelect($event)" [selected]="selected"
              [selectionType]="SelectionType.checkbox"
              [messages]="{emptyMessage: 'Nessun dato ad mostrare', selectedMessage: 'selezionat*', totalMessage: 'totali'}">

              <!-- ----------------------------checkbox--------------------------- -->
              <!-- <ngx-datatable-column [width]="50" [sortable]="false" [canAutoResize]="false" [draggable]="false"
                [resizeable]="false">
                <ng-template ngx-datatable-header-template let-value="value" let-allRowsSelected="allRowsSelected"
                  let-selectFn="selectFn">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" [checked]="allRowsSelected" (change)="selectFn(!allRowsSelected)" />
                  </div>
                </ng-template>
                <ng-template ngx-datatable-cell-template let-value="value" let-isSelected="isSelected"
                  let-onCheckboxChangeFn="onCheckboxChangeFn">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" [checked]="isSelected" (change)="onCheckboxChangeFn($event)" />
                  </div>
                </ng-template>
              </ngx-datatable-column> -->

              <!-- ------------------------------fine checkbox------------------------- -->
              <!-- <ngx-datatable-column [headerCheckboxable]="true" [checkboxable]="true" name="id" prop="id" [width]="50">
              </ngx-datatable-column> -->



              <!-- COLONNA AZIONI QUI NON UTILIZZATA -->

              <!-- <ngx-datatable-column name="Azioni" [width]="70">
                <ng-template ngx-datatable-cell-template let-row="row">
                  <i class="ft-edit text-primary cursor-pointer" (click)="onEdit(row)"></i>
                </ng-template>
              </ngx-datatable-column> -->

              <ngx-datatable-column [headerCheckboxable]="true" [checkboxable]="true" name="" [minWidth]="30"
                [maxWidth]="30" [width]="30" [sortable]="false" [resizeable]="false">
              </ngx-datatable-column>

              <ngx-datatable-column [headerCheckboxable]="false" [checkboxable]="false" name="Nome" prop="name"
                [width]="150">
              </ngx-datatable-column>
              <ngx-datatable-column name="Tipo" prop="type" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Stato" prop="status" [width]="150"></ngx-datatable-column>


            </ngx-datatable>
            <!-- ngx-datatable-filter -->

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!--/ Filter Datatables -->
